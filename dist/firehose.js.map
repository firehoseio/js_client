{"version":3,"sources":["webpack:///firehose.js","webpack:///webpack/bootstrap 01e198c436723849dd15","webpack:///./helpers/webpack.coffee","webpack:///external \"jQuery\"","webpack:///./lib/firehose/long_poll_transport.coffee","webpack:///./lib/firehose/transport.coffee","webpack:///./lib/firehose/web_socket_transport.coffee","webpack:///./lib/firehose/consumer.coffee","webpack:///./lib/firehose/multiplexed_long_poll.coffee","webpack:///./lib/firehose/multiplexed_web_socket.coffee","webpack:///./lib/firehose/index.coffee","webpack:///./lib/firehose/multiplexed_consumer.coffee"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","Firehose","window","jQuery","$","LongPollTransport","Transport","bind","fn","me","apply","arguments","extend","child","parent","ctor","this","constructor","key","hasProp","prototype","__super__","hasOwnProperty","superClass","args","_error","_ping","_success","stop","_requestParams","_request","_protocol","base","base1","base2","base3","config","ssl","longPoll","url","uri","timeout","_lagTime","_timeout","_okInterval","okInterval","_stopRequestLoop","_lastMessageSequence","messageSequenceHeader","name","ieSupported","document","documentMode","supported","xhr","ajaxSettings","data","last_message_sequence","_lastRequest","ajax","firehose","crossDomain","success","error","cache","params","e","error1","error2","abort","_lastPingRequest","status","jqXhr","last_sequence","message","ref","_needToNotifyOfReconnect","_succeeded","_open","JSON","parse","responseText","connect","method","_this","connected","disconnected","setTimeout","_retryDelay","getLastMessageSequence","_close","delay","event","failed","global","INITIAL_PING_TIMEOUT","KEEPALIVE_PING_TIMEOUT","WebSocketTransport","getWebSocket","sendPing","socket","send","stringify","ping","WebSocket","_clearKeepalive","_restartKeepAlive","_cleanUp","_message","sendStartingMessageSequence","_lookForInitialPong","_sendMessage","webSocket","connectionVerified","err","param","onopen","onclose","onerror","onmessage","console","log","isPong","message_sequence","_needToNotifyOfDisconnect","frame","wasClean","close","doPing","setNextKeepAlive","keepaliveTimeout","clearTimeout","Consumer","config1","base4","base5","base6","origConnected","_connectPromise","_upgradeTransport","longpollTransport","websocketTransport","_isConnected","promise","upgradeTimeout","ws","transport","deferred","Deferred","resolve","multiplexChannel","MultiplexedLongPoll","slice","_subscriptions","_updateLastMessageSequences","unsubscribe","subscribe","channel","opts","channelNames","length","dataType","results","seq","channels","push","subs","MultiplexedWebSocket","o","pong","multiplex_subscribe","multiplex_unsubscribe","version","codeName","MultiplexedConsumer","_updateSubscriptions","_removeSubscriptionHandler","_addSubscriptionHandler","messageHandlers","subscriptionQuery","join","normalizeChannels","chan","normalizeChannel","msg","handler","i","len"],"mappings":"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","file":"firehose.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Firehose;\n\t\n\tFirehose = __webpack_require__(8);\n\t\n\tif (typeof module === \"object\" && typeof module.exports === \"object\") {\n\t  module.exports = Firehose;\n\t} else {\n\t  window.Firehose = Firehose;\n\t}\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = jQuery;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, LongPollTransport, Transport,\n\t  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n\t  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n\t  hasProp = {}.hasOwnProperty;\n\t\n\t$ = __webpack_require__(1);\n\t\n\tTransport = __webpack_require__(3);\n\t\n\tLongPollTransport = (function(superClass) {\n\t  extend(LongPollTransport, superClass);\n\t\n\t  LongPollTransport.prototype.messageSequenceHeader = 'Pragma';\n\t\n\t  LongPollTransport.prototype.name = function() {\n\t    return 'LongPoll';\n\t  };\n\t\n\t  LongPollTransport.ieSupported = function() {\n\t    return (document.documentMode || 10) >= 8;\n\t  };\n\t\n\t  LongPollTransport.supported = function() {\n\t    var xhr;\n\t    if (xhr = $.ajaxSettings.xhr()) {\n\t      return \"withCredentials\" in xhr || LongPollTransport.ieSupported();\n\t    }\n\t  };\n\t\n\t  function LongPollTransport(args) {\n\t    this._error = bind(this._error, this);\n\t    this._ping = bind(this._ping, this);\n\t    this._success = bind(this._success, this);\n\t    this.stop = bind(this.stop, this);\n\t    this._requestParams = bind(this._requestParams, this);\n\t    this._request = bind(this._request, this);\n\t    this._protocol = bind(this._protocol, this);\n\t    var base, base1, base2, base3;\n\t    LongPollTransport.__super__.constructor.call(this, args);\n\t    if ((base = this.config).ssl == null) {\n\t      base.ssl = false;\n\t    }\n\t    (base1 = this.config).longPoll || (base1.longPoll = {});\n\t    (base2 = this.config.longPoll).url || (base2.url = (this._protocol()) + \":\" + this.config.uri);\n\t    (base3 = this.config.longPoll).timeout || (base3.timeout = 25000);\n\t    this._lagTime = 5000;\n\t    this._timeout = this.config.longPoll.timeout + this._lagTime;\n\t    this._okInterval = this.config.okInterval || 0;\n\t    this._stopRequestLoop = false;\n\t    this._lastMessageSequence = 0;\n\t  }\n\t\n\t  LongPollTransport.prototype._protocol = function() {\n\t    if (this.config.ssl) {\n\t      return \"https\";\n\t    } else {\n\t      return \"http\";\n\t    }\n\t  };\n\t\n\t  LongPollTransport.prototype._request = function() {\n\t    var data;\n\t    if (this._stopRequestLoop) {\n\t      return;\n\t    }\n\t    data = this._requestParams();\n\t    data.last_message_sequence = this._lastMessageSequence;\n\t    return this._lastRequest = $.ajax({\n\t      url: this.config.longPoll.url,\n\t      firehose: true,\n\t      crossDomain: true,\n\t      data: data,\n\t      timeout: this._timeout,\n\t      success: this._success,\n\t      error: this._error,\n\t      cache: false\n\t    });\n\t  };\n\t\n\t  LongPollTransport.prototype._requestParams = function() {\n\t    return this.config.params;\n\t  };\n\t\n\t  LongPollTransport.prototype.stop = function() {\n\t    var e, error1, error2;\n\t    this._stopRequestLoop = true;\n\t    if (this._lastRequest != null) {\n\t      try {\n\t        this._lastRequest.abort();\n\t      } catch (error1) {\n\t        e = error1;\n\t      }\n\t      delete this._lastRequest;\n\t    }\n\t    if (this._lastPingRequest != null) {\n\t      try {\n\t        this._lastPingRequest.abort();\n\t      } catch (error2) {\n\t        e = error2;\n\t      }\n\t      return delete this._lastPingRequest;\n\t    }\n\t  };\n\t\n\t  LongPollTransport.prototype._success = function(data, status, jqXhr) {\n\t    var e, error1, last_sequence, message, ref;\n\t    if (this._needToNotifyOfReconnect || !this._succeeded) {\n\t      this._needToNotifyOfReconnect = false;\n\t      this._open(data);\n\t    }\n\t    if (this._stopRequestLoop) {\n\t      return;\n\t    }\n\t    if (jqXhr.status === 200) {\n\t      try {\n\t        ref = JSON.parse(jqXhr.responseText), message = ref.message, last_sequence = ref.last_sequence;\n\t        this._lastMessageSequence = last_sequence || 0;\n\t        this.config.message(this.config.parse(message));\n\t      } catch (error1) {\n\t        e = error1;\n\t      }\n\t    }\n\t    return this.connect(this._okInterval);\n\t  };\n\t\n\t  LongPollTransport.prototype._ping = function() {\n\t    return this._lastPingRequest = $.ajax({\n\t      url: this.config.uri,\n\t      method: 'HEAD',\n\t      crossDomain: true,\n\t      firehose: true,\n\t      data: this._requestParams(),\n\t      success: (function(_this) {\n\t        return function() {\n\t          if (_this._needToNotifyOfReconnect) {\n\t            _this._needToNotifyOfReconnect = false;\n\t            return _this.config.connected(_this);\n\t          }\n\t        };\n\t      })(this)\n\t    });\n\t  };\n\t\n\t  LongPollTransport.prototype._error = function(jqXhr, status, error) {\n\t    if (!(this._needToNotifyOfReconnect || this._stopRequestLoop)) {\n\t      this._needToNotifyOfReconnect = true;\n\t      this.config.disconnected();\n\t    }\n\t    if (!this._stopRequestLoop) {\n\t      setTimeout(this._ping, this._retryDelay + this._lagTime);\n\t      return setTimeout(this._request, this._retryDelay);\n\t    }\n\t  };\n\t\n\t  return LongPollTransport;\n\t\n\t})(Transport);\n\t\n\tmodule.exports = LongPollTransport;\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tvar Transport,\n\t  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\tTransport = (function() {\n\t  Transport.supported = function() {\n\t    return false;\n\t  };\n\t\n\t  function Transport(config) {\n\t    var base;\n\t    if (config == null) {\n\t      config = {};\n\t    }\n\t    this.getLastMessageSequence = bind(this.getLastMessageSequence, this);\n\t    this._close = bind(this._close, this);\n\t    this._open = bind(this._open, this);\n\t    this._error = bind(this._error, this);\n\t    this.connect = bind(this.connect, this);\n\t    this.config = config;\n\t    (base = this.config).params || (base.params = {});\n\t    this._retryDelay = 3000;\n\t    this;\n\t  }\n\t\n\t  Transport.prototype.connect = function(delay) {\n\t    if (delay == null) {\n\t      delay = 0;\n\t    }\n\t    setTimeout(this._request, delay);\n\t    return this;\n\t  };\n\t\n\t  Transport.prototype.name = function() {\n\t    throw 'not implemented in base Transport';\n\t  };\n\t\n\t  Transport.prototype.stop = function() {\n\t    throw 'not implemented in base Transport';\n\t  };\n\t\n\t  Transport.prototype._request = function() {\n\t    throw 'not implemented in base Transport';\n\t  };\n\t\n\t  Transport.prototype._error = function(event) {\n\t    if (this._succeeded) {\n\t      this.config.disconnected();\n\t      return this.connect(this._retryDelay);\n\t    } else {\n\t      return this.config.failed(this);\n\t    }\n\t  };\n\t\n\t  Transport.prototype._open = function(event) {\n\t    this._succeeded = true;\n\t    return this.config.connected(this);\n\t  };\n\t\n\t  Transport.prototype._close = function(event) {\n\t    return this.config.disconnected();\n\t  };\n\t\n\t  Transport.prototype.getLastMessageSequence = function() {\n\t    return this._lastMessageSequence || 0;\n\t  };\n\t\n\t  return Transport;\n\t\n\t})();\n\t\n\tmodule.exports = Transport;\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var $, INITIAL_PING_TIMEOUT, KEEPALIVE_PING_TIMEOUT, Transport, WebSocketTransport, getWebSocket, sendPing,\n\t  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n\t  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n\t  hasProp = {}.hasOwnProperty;\n\t\n\t$ = __webpack_require__(1);\n\t\n\tTransport = __webpack_require__(3);\n\t\n\tINITIAL_PING_TIMEOUT = 2000;\n\t\n\tKEEPALIVE_PING_TIMEOUT = 20000;\n\t\n\tsendPing = function(socket) {\n\t  return socket.send(JSON.stringify({\n\t    ping: 'PING'\n\t  }));\n\t};\n\t\n\tgetWebSocket = function() {\n\t  return (typeof window !== \"undefined\" && window !== null ? window.WebSocket : void 0) || (typeof global !== \"undefined\" && global !== null ? global.WebSocket : void 0);\n\t};\n\t\n\tWebSocketTransport = (function(superClass) {\n\t  extend(WebSocketTransport, superClass);\n\t\n\t  WebSocketTransport.prototype.name = function() {\n\t    return 'WebSocket';\n\t  };\n\t\n\t  WebSocketTransport.ieSupported = function() {\n\t    return (document.documentMode || 10) > 9;\n\t  };\n\t\n\t  WebSocketTransport.supported = function() {\n\t    return !!getWebSocket();\n\t  };\n\t\n\t  function WebSocketTransport(args) {\n\t    this._clearKeepalive = bind(this._clearKeepalive, this);\n\t    this._restartKeepAlive = bind(this._restartKeepAlive, this);\n\t    this._cleanUp = bind(this._cleanUp, this);\n\t    this._error = bind(this._error, this);\n\t    this._close = bind(this._close, this);\n\t    this._message = bind(this._message, this);\n\t    this.stop = bind(this.stop, this);\n\t    this.sendStartingMessageSequence = bind(this.sendStartingMessageSequence, this);\n\t    this._lookForInitialPong = bind(this._lookForInitialPong, this);\n\t    this._open = bind(this._open, this);\n\t    this._requestParams = bind(this._requestParams, this);\n\t    this._protocol = bind(this._protocol, this);\n\t    this._request = bind(this._request, this);\n\t    this._sendMessage = bind(this._sendMessage, this);\n\t    var base;\n\t    WebSocketTransport.__super__.constructor.call(this, args);\n\t    (base = this.config).webSocket || (base.webSocket = {});\n\t    this.config.webSocket.connectionVerified = this.config.connectionVerified;\n\t  }\n\t\n\t  WebSocketTransport.prototype._sendMessage = function(message) {\n\t    var ref;\n\t    return (ref = this.socket) != null ? ref.send(JSON.stringify(message)) : void 0;\n\t  };\n\t\n\t  WebSocketTransport.prototype._request = function() {\n\t    var err, error;\n\t    try {\n\t      this.socket = new getWebSocket()((this._protocol()) + \":\" + this.config.uri + \"?\" + ($.param(this._requestParams())));\n\t      this.socket.onopen = this._open;\n\t      this.socket.onclose = this._close;\n\t      this.socket.onerror = this._error;\n\t      return this.socket.onmessage = this._lookForInitialPong;\n\t    } catch (error) {\n\t      err = error;\n\t      return typeof console !== \"undefined\" && console !== null ? console.log(err) : void 0;\n\t    }\n\t  };\n\t\n\t  WebSocketTransport.prototype._protocol = function() {\n\t    if (this.config.ssl) {\n\t      return \"wss\";\n\t    } else {\n\t      return \"ws\";\n\t    }\n\t  };\n\t\n\t  WebSocketTransport.prototype._requestParams = function() {\n\t    return this.config.params;\n\t  };\n\t\n\t  WebSocketTransport.prototype._open = function() {\n\t    return sendPing(this.socket);\n\t  };\n\t\n\t  WebSocketTransport.prototype._lookForInitialPong = function(event) {\n\t    var e;\n\t    this._restartKeepAlive();\n\t    if (isPong((function() {\n\t      var error;\n\t      try {\n\t        return JSON.parse(event.data);\n\t      } catch (error) {\n\t        e = error;\n\t        return {};\n\t      }\n\t    })())) {\n\t      if (this._lastMessageSequence != null) {\n\t        return this.sendStartingMessageSequence(this._lastMessageSequence);\n\t      } else {\n\t        return this.config.webSocket.connectionVerified(this);\n\t      }\n\t    }\n\t  };\n\t\n\t  WebSocketTransport.prototype.sendStartingMessageSequence = function(message_sequence) {\n\t    this._lastMessageSequence = message_sequence;\n\t    this.socket.onmessage = this._message;\n\t    this._sendMessage({\n\t      message_sequence: message_sequence\n\t    });\n\t    this._needToNotifyOfDisconnect = true;\n\t    return Transport.prototype._open.call(this);\n\t  };\n\t\n\t  WebSocketTransport.prototype.stop = function() {\n\t    return this._cleanUp();\n\t  };\n\t\n\t  WebSocketTransport.prototype._message = function(event) {\n\t    var e, error, frame;\n\t    frame = this.config.parse(event.data);\n\t    this._restartKeepAlive();\n\t    if (!isPong(frame)) {\n\t      try {\n\t        this._lastMessageSequence = frame.last_sequence;\n\t        return this.config.message(this.config.parse(frame.message));\n\t      } catch (error) {\n\t        e = error;\n\t      }\n\t    }\n\t  };\n\t\n\t  WebSocketTransport.prototype._close = function(event) {\n\t    if (event != null ? event.wasClean : void 0) {\n\t      return this._cleanUp();\n\t    } else {\n\t      return this._error(event);\n\t    }\n\t  };\n\t\n\t  WebSocketTransport.prototype._error = function(event) {\n\t    this._cleanUp();\n\t    if (this._needToNotifyOfDisconnect) {\n\t      this._needToNotifyOfDisconnect = false;\n\t      this.config.disconnected();\n\t    }\n\t    if (this._succeeded) {\n\t      return this.connect(this._retryDelay);\n\t    } else if (this.config.failed) {\n\t      return this.config.failed(this);\n\t    }\n\t  };\n\t\n\t  WebSocketTransport.prototype._cleanUp = function() {\n\t    this._clearKeepalive();\n\t    if (this.socket != null) {\n\t      this.socket.onopen = null;\n\t      this.socket.onclose = null;\n\t      this.socket.onerror = null;\n\t      this.socket.onmessage = null;\n\t      return this.socket.close();\n\t    }\n\t  };\n\t\n\t  WebSocketTransport.prototype._restartKeepAlive = function() {\n\t    var doPing, setNextKeepAlive;\n\t    doPing = (function(_this) {\n\t      return function() {\n\t        sendPing(_this.socket);\n\t        return setNextKeepAlive();\n\t      };\n\t    })(this);\n\t    setNextKeepAlive = (function(_this) {\n\t      return function() {\n\t        return _this.keepaliveTimeout = setTimeout(doPing, KEEPALIVE_PING_TIMEOUT);\n\t      };\n\t    })(this);\n\t    this._clearKeepalive();\n\t    return setNextKeepAlive();\n\t  };\n\t\n\t  WebSocketTransport.prototype._clearKeepalive = function() {\n\t    if (this.keepaliveTimeout != null) {\n\t      clearTimeout(this.keepaliveTimeout);\n\t      return this.keepaliveTimeout = null;\n\t    }\n\t  };\n\t\n\t  return WebSocketTransport;\n\t\n\t})(Transport);\n\t\n\tmodule.exports = WebSocketTransport;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, Consumer, LongPollTransport, WebSocketTransport,\n\t  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\t$ = __webpack_require__(1);\n\t\n\tWebSocketTransport = __webpack_require__(4);\n\t\n\tLongPollTransport = __webpack_require__(2);\n\t\n\tConsumer = (function() {\n\t  function Consumer(config1) {\n\t    var base, base1, base2, base3, base4, base5, base6, origConnected;\n\t    this.config = config1 != null ? config1 : {};\n\t    this._connectPromise = bind(this._connectPromise, this);\n\t    this._upgradeTransport = bind(this._upgradeTransport, this);\n\t    this.stop = bind(this.stop, this);\n\t    this.connect = bind(this.connect, this);\n\t    this.longpollTransport = bind(this.longpollTransport, this);\n\t    this.websocketTransport = bind(this.websocketTransport, this);\n\t    this.connected = bind(this.connected, this);\n\t    (base = this.config).message || (base.message = function() {});\n\t    (base1 = this.config).error || (base1.error = function() {});\n\t    (base2 = this.config).connected || (base2.connected = function() {});\n\t    (base3 = this.config).disconnected || (base3.disconnected = function() {});\n\t    (base4 = this.config).failed || (base4.failed = function() {\n\t      throw \"Could not connect\";\n\t    });\n\t    (base5 = this.config).params || (base5.params = {});\n\t    (base6 = this.config).parse || (base6.parse = JSON.parse);\n\t    this._isConnected = false;\n\t    origConnected = this.config.connected;\n\t    this.config.connected = (function(_this) {\n\t      return function() {\n\t        _this._isConnected = true;\n\t        return origConnected();\n\t      };\n\t    })(this);\n\t    this;\n\t  }\n\t\n\t  Consumer.prototype.connected = function() {\n\t    return this._isConnected;\n\t  };\n\t\n\t  Consumer.prototype.websocketTransport = function(config) {\n\t    return new WebSocketTransport(config);\n\t  };\n\t\n\t  Consumer.prototype.longpollTransport = function(config) {\n\t    return new LongPollTransport(config);\n\t  };\n\t\n\t  Consumer.prototype.connect = function(delay) {\n\t    var promise;\n\t    if (delay == null) {\n\t      delay = 0;\n\t    }\n\t    promise = this._connectPromise();\n\t    this.config.connectionVerified = this._upgradeTransport;\n\t    if (WebSocketTransport.supported()) {\n\t      this.upgradeTimeout = setTimeout((function(_this) {\n\t        return function() {\n\t          var ws;\n\t          ws = _this.websocketTransport(_this.config);\n\t          return ws.connect(delay);\n\t        };\n\t      })(this), 500);\n\t    }\n\t    this.transport = this.longpollTransport(this.config);\n\t    this.transport.connect(delay);\n\t    return promise;\n\t  };\n\t\n\t  Consumer.prototype.stop = function() {\n\t    if (this.upgradeTimeout != null) {\n\t      clearTimeout(this.upgradeTimeout);\n\t      this.upgradeTimeout = null;\n\t    }\n\t    this.transport.stop();\n\t  };\n\t\n\t  Consumer.prototype._upgradeTransport = function(ws) {\n\t    this.transport.stop();\n\t    ws.sendStartingMessageSequence(this.transport.getLastMessageSequence());\n\t    this.transport = ws;\n\t  };\n\t\n\t  Consumer.prototype._connectPromise = function() {\n\t    var deferred, origConnected;\n\t    deferred = $.Deferred();\n\t    origConnected = this.config.connected;\n\t    this.config.connected = (function(_this) {\n\t      return function() {\n\t        deferred.resolve();\n\t        if (origConnected) {\n\t          _this.config.connected = origConnected;\n\t          return origConnected();\n\t        }\n\t      };\n\t    })(this);\n\t    return deferred.promise();\n\t  };\n\t\n\t  return Consumer;\n\t\n\t})();\n\t\n\tConsumer.multiplexChannel = \"channels@firehose\";\n\t\n\tmodule.exports = Consumer;\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, LongPollTransport, MultiplexedLongPoll,\n\t  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n\t  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n\t  hasProp = {}.hasOwnProperty,\n\t  slice = [].slice;\n\t\n\t$ = __webpack_require__(1);\n\t\n\tLongPollTransport = __webpack_require__(2);\n\t\n\tMultiplexedLongPoll = (function(superClass) {\n\t  extend(MultiplexedLongPoll, superClass);\n\t\n\t  function MultiplexedLongPoll(args) {\n\t    this._success = bind(this._success, this);\n\t    this._subscriptions = bind(this._subscriptions, this);\n\t    this._updateLastMessageSequences = bind(this._updateLastMessageSequences, this);\n\t    this._request = bind(this._request, this);\n\t    this.unsubscribe = bind(this.unsubscribe, this);\n\t    this.subscribe = bind(this.subscribe, this);\n\t    MultiplexedLongPoll.__super__.constructor.call(this, args);\n\t    this._lastMessageSequence = {};\n\t  }\n\t\n\t  MultiplexedLongPoll.prototype.subscribe = function(channel, opts) {};\n\t\n\t  MultiplexedLongPoll.prototype.unsubscribe = function() {\n\t    var channelNames;\n\t    channelNames = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n\t  };\n\t\n\t  MultiplexedLongPoll.prototype._request = function() {\n\t    var data;\n\t    if (this._stopRequestLoop) {\n\t      return;\n\t    }\n\t    data = this._subscriptions();\n\t    return this._lastRequest = $.ajax({\n\t      url: this.config.uri,\n\t      firehose: true,\n\t      crossDomain: true,\n\t      method: \"POST\",\n\t      data: data,\n\t      dataType: \"json\",\n\t      timeout: this._timeout,\n\t      success: this._success,\n\t      error: this._error,\n\t      cache: false\n\t    });\n\t  };\n\t\n\t  MultiplexedLongPoll.prototype._updateLastMessageSequences = function() {\n\t    var channel, opts, ref, results, seq;\n\t    ref = this.config.channels;\n\t    results = [];\n\t    for (channel in ref) {\n\t      opts = ref[channel];\n\t      if (seq = this._lastMessageSequence[channel]) {\n\t        results.push(opts.last_sequence = seq);\n\t      } else {\n\t        if (!opts.last_sequence) {\n\t          results.push(opts.last_sequence = 0);\n\t        } else {\n\t          results.push(void 0);\n\t        }\n\t      }\n\t    }\n\t    return results;\n\t  };\n\t\n\t  MultiplexedLongPoll.prototype._subscriptions = function() {\n\t    var channel, opts, ref, subs;\n\t    this._updateLastMessageSequences();\n\t    subs = {};\n\t    ref = this.config.channels;\n\t    for (channel in ref) {\n\t      opts = ref[channel];\n\t      subs[channel] = opts.last_sequence || 0;\n\t    }\n\t    return JSON.stringify(subs);\n\t  };\n\t\n\t  MultiplexedLongPoll.prototype._success = function(data, status, jqXhr) {\n\t    var e, error, message;\n\t    if (this._needToNotifyOfReconnect || !this._succeeded) {\n\t      this._needToNotifyOfReconnect = false;\n\t      this._open(data);\n\t    }\n\t    if (this._stopRequestLoop) {\n\t      return;\n\t    }\n\t    if (jqXhr.status === 200) {\n\t      try {\n\t        message = JSON.parse(jqXhr.responseText);\n\t        this._lastMessageSequence || (this._lastMessageSequence = {});\n\t        this._lastMessageSequence[message.channel] = message.last_sequence;\n\t        this.config.message(message);\n\t      } catch (error) {\n\t        e = error;\n\t      }\n\t    }\n\t    return this.connect(this._okInterval);\n\t  };\n\t\n\t  return MultiplexedLongPoll;\n\t\n\t})(LongPollTransport);\n\t\n\tmodule.exports = MultiplexedLongPoll;\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar MultiplexedWebSocket, WebSocketTransport, isPong,\n\t  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n\t  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n\t  hasProp = {}.hasOwnProperty,\n\t  slice = [].slice;\n\t\n\tWebSocketTransport = __webpack_require__(4);\n\t\n\tisPong = function(o) {\n\t  return o.pong === 'PONG';\n\t};\n\t\n\tMultiplexedWebSocket = (function(superClass) {\n\t  extend(MultiplexedWebSocket, superClass);\n\t\n\t  function MultiplexedWebSocket(args) {\n\t    this._message = bind(this._message, this);\n\t    this._open = bind(this._open, this);\n\t    this.getLastMessageSequence = bind(this.getLastMessageSequence, this);\n\t    this.unsubscribe = bind(this.unsubscribe, this);\n\t    this.subscribe = bind(this.subscribe, this);\n\t    MultiplexedWebSocket.__super__.constructor.call(this, args);\n\t  }\n\t\n\t  MultiplexedWebSocket.prototype.subscribe = function(channel, opts) {\n\t    return this._sendMessage({\n\t      multiplex_subscribe: {\n\t        channel: channel,\n\t        message_sequence: opts.last_sequence\n\t      }\n\t    });\n\t  };\n\t\n\t  MultiplexedWebSocket.prototype.unsubscribe = function() {\n\t    var channelNames;\n\t    channelNames = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n\t    return this._sendMessage({\n\t      multiplex_unsubscribe: channelNames\n\t    });\n\t  };\n\t\n\t  MultiplexedWebSocket.prototype.getLastMessageSequence = function() {\n\t    return this._lastMessageSequence || {};\n\t  };\n\t\n\t  MultiplexedWebSocket.prototype._open = function() {\n\t    var channel, opts, ref, results;\n\t    MultiplexedWebSocket.__super__._open.call(this);\n\t    ref = this.config.channels;\n\t    results = [];\n\t    for (channel in ref) {\n\t      opts = ref[channel];\n\t      if (this._lastMessageSequence) {\n\t        opts.last_sequence = this._lastMessageSequence[channel];\n\t      }\n\t      if (!opts.last_sequence) {\n\t        opts.last_sequence = 0;\n\t      }\n\t      results.push(this.subscribe(channel, opts));\n\t    }\n\t    return results;\n\t  };\n\t\n\t  MultiplexedWebSocket.prototype._message = function(event) {\n\t    var e, error, frame;\n\t    frame = this.config.parse(event.data);\n\t    this._restartKeepAlive();\n\t    if (!isPong(frame)) {\n\t      try {\n\t        this._lastMessageSequence || (this._lastMessageSequence = {});\n\t        this._lastMessageSequence[frame.channel] = frame.last_sequence;\n\t        return this.config.message(frame);\n\t      } catch (error) {\n\t        e = error;\n\t      }\n\t    }\n\t  };\n\t\n\t  return MultiplexedWebSocket;\n\t\n\t})(WebSocketTransport);\n\t\n\tmodule.exports = MultiplexedWebSocket;\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = {\n\t  version: (\"1.0.1\"),\n\t  codeName: (\"Jingle All the Way\"),\n\t  Consumer: __webpack_require__(5),\n\t  LongPollTransport: __webpack_require__(2),\n\t  MultiplexedConsumer: __webpack_require__(9),\n\t  MultiplexedLongPoll: __webpack_require__(6),\n\t  Transport: __webpack_require__(3),\n\t  WebSocketTransport: __webpack_require__(4),\n\t  MultiplexedWebSocket: __webpack_require__(7)\n\t};\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Consumer, MultiplexedConsumer, MultiplexedLongPoll, MultiplexedWebSocket,\n\t  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n\t  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n\t  hasProp = {}.hasOwnProperty,\n\t  slice = [].slice;\n\t\n\tConsumer = __webpack_require__(5);\n\t\n\tMultiplexedWebSocket = __webpack_require__(7);\n\t\n\tMultiplexedLongPoll = __webpack_require__(6);\n\t\n\tMultiplexedConsumer = (function(superClass) {\n\t  extend(MultiplexedConsumer, superClass);\n\t\n\t  MultiplexedConsumer.subscriptionQuery = function(config) {\n\t    var channel, opts;\n\t    return {\n\t      subscribe: [\n\t        (function() {\n\t          var ref, results;\n\t          ref = config.channels;\n\t          results = [];\n\t          for (channel in ref) {\n\t            opts = ref[channel];\n\t            results.push(channel + \"!\" + (opts.last_sequence || 0));\n\t          }\n\t          return results;\n\t        })()\n\t      ].join(\",\")\n\t    };\n\t  };\n\t\n\t  MultiplexedConsumer.normalizeChannels = function(config) {\n\t    var chan, opts, ref, results;\n\t    ref = config.channels;\n\t    results = [];\n\t    for (chan in ref) {\n\t      opts = ref[chan];\n\t      if (chan[0] !== \"/\") {\n\t        delete config.channels[chan];\n\t        results.push(config.channels[\"/\" + chan] = opts);\n\t      } else {\n\t        results.push(void 0);\n\t      }\n\t    }\n\t    return results;\n\t  };\n\t\n\t  MultiplexedConsumer.normalizeChannel = function(channel) {\n\t    if (channel[0] !== \"/\") {\n\t      return \"/\" + channel;\n\t    } else {\n\t      return channel;\n\t    }\n\t  };\n\t\n\t  function MultiplexedConsumer(config1) {\n\t    var base, base1, channel, opts, ref;\n\t    this.config = config1 != null ? config1 : {};\n\t    this.unsubscribe = bind(this.unsubscribe, this);\n\t    this.subscribe = bind(this.subscribe, this);\n\t    this._updateSubscriptions = bind(this._updateSubscriptions, this);\n\t    this._removeSubscriptionHandler = bind(this._removeSubscriptionHandler, this);\n\t    this._addSubscriptionHandler = bind(this._addSubscriptionHandler, this);\n\t    this.message = bind(this.message, this);\n\t    this.longpollTransport = bind(this.longpollTransport, this);\n\t    this.websocketTransport = bind(this.websocketTransport, this);\n\t    this.messageHandlers = {};\n\t    (base = this.config).message || (base.message = this.message);\n\t    (base1 = this.config).channels || (base1.channels = {});\n\t    this.config.uri += Consumer.multiplexChannel;\n\t    this._updateSubscriptions();\n\t    ref = this.config.channels;\n\t    for (channel in ref) {\n\t      opts = ref[channel];\n\t      this._addSubscriptionHandler(channel, opts);\n\t    }\n\t    MultiplexedConsumer.__super__.constructor.call(this, this.config);\n\t  }\n\t\n\t  MultiplexedConsumer.prototype.websocketTransport = function(config) {\n\t    return new MultiplexedWebSocket(config);\n\t  };\n\t\n\t  MultiplexedConsumer.prototype.longpollTransport = function(config) {\n\t    return new MultiplexedLongPoll(config);\n\t  };\n\t\n\t  MultiplexedConsumer.prototype.message = function(msg) {\n\t    var handler;\n\t    if (handler = this.messageHandlers[msg.channel]) {\n\t      return handler(this.config.parse(msg.message));\n\t    }\n\t  };\n\t\n\t  MultiplexedConsumer.prototype._addSubscriptionHandler = function(channel, opts) {\n\t    if (opts.message) {\n\t      return this.messageHandlers[channel] = opts.message;\n\t    }\n\t  };\n\t\n\t  MultiplexedConsumer.prototype._removeSubscriptionHandler = function() {\n\t    var chan, channelNames, i, len, results;\n\t    channelNames = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n\t    results = [];\n\t    for (i = 0, len = channelNames.length; i < len; i++) {\n\t      chan = channelNames[i];\n\t      results.push(delete this.messageHandlers[chan]);\n\t    }\n\t    return results;\n\t  };\n\t\n\t  MultiplexedConsumer.prototype._updateSubscriptions = function() {\n\t    return MultiplexedConsumer.normalizeChannels(this.config);\n\t  };\n\t\n\t  MultiplexedConsumer.prototype.subscribe = function(channel, opts) {\n\t    if (opts == null) {\n\t      opts = {};\n\t    }\n\t    channel = MultiplexedConsumer.normalizeChannel(channel);\n\t    this.config.channels[channel] = opts;\n\t    this._updateSubscriptions();\n\t    this._addSubscriptionHandler(channel, opts);\n\t    return this.transport.subscribe(channel, opts);\n\t  };\n\t\n\t  MultiplexedConsumer.prototype.unsubscribe = function() {\n\t    var channel, channelNames, i, len, ref;\n\t    channelNames = 1 <= arguments.length ? slice.call(arguments, 0) : [];\n\t    if (!this.connected()) {\n\t      return;\n\t    }\n\t    for (i = 0, len = channelNames.length; i < len; i++) {\n\t      channel = channelNames[i];\n\t      channel = MultiplexedConsumer.normalizeChannel(channel);\n\t      delete this.config.channels[channel];\n\t    }\n\t    this._updateSubscriptions();\n\t    this._removeSubscriptionHandler.apply(this, channelNames);\n\t    return (ref = this.transport).unsubscribe.apply(ref, channelNames);\n\t  };\n\t\n\t  return MultiplexedConsumer;\n\t\n\t})(Consumer);\n\t\n\tmodule.exports = MultiplexedConsumer;\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** firehose.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 01e198c436723849dd15\n **/","Firehose = require \"../lib/firehose\"\n\nif typeof module == \"object\" && typeof module.exports == \"object\"\n  module.exports = Firehose\nelse\n  window.Firehose = Firehose\n\n\n\n/** WEBPACK FOOTER **\n ** ./helpers/webpack.coffee\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 1\n ** module chunks = 0\n **/","$ = require \"jquery\"\nTransport = require \"./transport\"\n\nclass LongPollTransport extends Transport\n  messageSequenceHeader: 'Pragma'\n  name: -> 'LongPoll'\n\n  # CORS is kinda supported in IE8+ except that its implementation cannot\n  # access \"simple request\" response headers. This means we don't yet have a\n  # plan to support IE<10 (when it gets a real XHR2 implementation). Sucks...\n  # $.browser.msie and parseInt($.browser.version) >= 8 # DEPRECATED\n  @ieSupported: -> (document.documentMode || 10) >= 8\n\n  @supported: ->\n    # IE 8+, FF 3.5+, Chrome 4+, Safari 4+, Opera 12+, iOS 3.2+, Android 2.1+\n    if xhr = $.ajaxSettings.xhr()\n      \"withCredentials\" of xhr || LongPollTransport.ieSupported()\n\n  constructor: (args) ->\n    super args\n\n    @config.ssl ?= false\n\n    # Configrations specifically for long polling\n    @config.longPoll         ||= {}\n    @config.longPoll.url     ||= \"#{@_protocol()}:#{@config.uri}\"\n    # How many ms should we wait before timing out the AJAX connection?\n    @config.longPoll.timeout ||= 25000\n    # TODO - What is @_lagTime for? Can't we just use the @_timeout value?\n    # We use the lag time to make the client live longer than the server.\n    @_lagTime                  = 5000\n    @_timeout                  = @config.longPoll.timeout + @_lagTime\n    @_okInterval               = @config.okInterval || 0\n    @_stopRequestLoop          = false\n    @_lastMessageSequence      = 0\n\n  # Protocol schema we should use for talking to firehose server.\n  _protocol: =>\n    if @config.ssl then \"https\" else \"http\"\n\n  _request: =>\n    return if @_stopRequestLoop\n    # Set the Last Message Sequence in a query string.\n    # Ideally we'd use an HTTP header, but android devices don't let us\n    # set any HTTP headers for CORS requests.\n    data = @_requestParams()\n    data.last_message_sequence = @_lastMessageSequence\n    # TODO: Some of these options will be deprecated in jQuery 1.8\n    #       See: http://api.jquery.com/jQuery.ajax/#jqXHR\n    @_lastRequest = $.ajax\n      url:          @config.longPoll.url\n      firehose:     true\n      crossDomain:  true\n      data:         data\n      timeout:      @_timeout\n      success:      @_success\n      error:        @_error\n      cache:        false\n\n  _requestParams: =>\n    @config.params\n\n  stop: =>\n    @_stopRequestLoop = true\n    if @_lastRequest?\n      try @_lastRequest.abort() catch e\n      delete @_lastRequest\n    if @_lastPingRequest?\n      try @_lastPingRequest.abort() catch e\n      delete @_lastPingRequest\n\n  _success: (data, status, jqXhr) =>\n    if @_needToNotifyOfReconnect or not @_succeeded\n      @_needToNotifyOfReconnect = false\n      @_open data\n    return if @_stopRequestLoop\n    if jqXhr.status is 200\n      # Of course, IE's XDomainRequest doesn't support non-200 success codes.\n      try\n        {message, last_sequence} = JSON.parse jqXhr.responseText\n        @_lastMessageSequence    = last_sequence || 0\n        @config.message @config.parse message\n      catch e\n    @connect @_okInterval\n\n  _ping: =>\n    # Ping long poll server to verify internet connectivity\n    # jQuery CORS doesn't support timeouts and there is no way to access xhr2 object\n    # directly so we can't manually set a timeout.\n    @_lastPingRequest = $.ajax\n      url:          @config.uri\n      method:       'HEAD'\n      crossDomain:  true\n      firehose:     true\n      data:         @_requestParams()\n      success:      =>\n        if @_needToNotifyOfReconnect\n          @_needToNotifyOfReconnect = false\n          @config.connected @\n\n  # We need this custom handler to have the connection status\n  # properly displayed\n  _error: (jqXhr, status, error) =>\n    unless @_needToNotifyOfReconnect or @_stopRequestLoop\n      @_needToNotifyOfReconnect = true\n      @config.disconnected()\n    unless @_stopRequestLoop\n      # Ping the server to make sure this isn't a network connectivity error\n      setTimeout @_ping, @_retryDelay + @_lagTime\n      # Reconnect with delay\n      setTimeout @_request, @_retryDelay\n\nmodule.exports = LongPollTransport\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/firehose/long_poll_transport.coffee\n **/","class Transport\n  # Class method to determine whether transport is supported by the current browser. Note that while\n  # the transport may be supported by the browser, its possible that the network connection won't\n  # succeed. That should be accounted for during the initial connecting to the server.\n  @supported: =>\n    false\n\n  constructor: (config={}) ->\n    @config = config\n    @config.params ||= {}\n\n    @_retryDelay = 3000\n    @\n\n  # Lets rock'n'roll! Connect to the server.\n  connect: (delay = 0) =>\n    setTimeout @_request, delay\n    this\n\n  # Hey subclasses:\n  name: ->     throw 'not implemented in base Transport' # implement this to identify transport type\n  stop: ->     throw 'not implemented in base Transport' # implement this to stop receiving messages\n  _request: -> throw 'not implemented in base Transport' # implement this to handle requests\n\n  # Default error handler\n  _error: (event) =>\n    if @_succeeded\n      # Lets try to connect again with delay\n      @config.disconnected()\n      @connect(@_retryDelay)\n    else @config.failed @\n\n  # Default connection established handler\n  _open: (event) =>\n    @_succeeded = true\n    @config.connected(@)\n\n  # Default connection closed handler\n  _close: (event) =>\n    @config.disconnected()\n\n  # Useful for reconnecting after any networking hiccups\n  getLastMessageSequence: =>\n    @_lastMessageSequence or 0\n\nmodule.exports = Transport\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/firehose/transport.coffee\n **/","$ = require \"jquery\"\nTransport = require \"./transport\"\n\nINITIAL_PING_TIMEOUT   =  2000\nKEEPALIVE_PING_TIMEOUT = 20000\n\nsendPing = (socket) ->\n  socket.send JSON.stringify ping: 'PING'\n\ngetWebSocket = ->\n  window?.WebSocket || global?.WebSocket\n\nclass WebSocketTransport extends Transport\n  name: -> 'WebSocket'\n\n  @ieSupported:-> (document.documentMode || 10) > 9\n  @supported  :-> !!getWebSocket() # Check if WebSocket is an object in the window.\n\n  constructor: (args) ->\n    super args\n    # Configrations specifically for web sockets\n    @config.webSocket ||= {}\n    @config.webSocket.connectionVerified = @config.connectionVerified\n\n  _sendMessage: (message) =>\n    @socket?.send(JSON.stringify message)\n\n  _request: =>\n    # Run this in a try/catch block because IE10 inside of a .NET control\n    # complains about security zones.\n    try\n      @socket = new getWebSocket()(\"#{@_protocol()}:#{@config.uri}?#{$.param @_requestParams()}\")\n      @socket.onopen    = @_open\n      @socket.onclose   = @_close\n      @socket.onerror   = @_error\n      @socket.onmessage = @_lookForInitialPong\n    catch err\n      console?.log(err)\n\n  # Protocol schema we should use for talking to firehose server.\n  _protocol: =>\n    if @config.ssl then \"wss\" else \"ws\"\n\n  _requestParams: =>\n    @config.params\n\n  _open: =>\n    sendPing @socket\n\n  _lookForInitialPong: (event) =>\n    @_restartKeepAlive()\n    if isPong(try JSON.parse event.data catch e then {})\n      if @_lastMessageSequence?\n        # don't callback to connectionVerified on subsequent reconnects\n        @sendStartingMessageSequence @_lastMessageSequence\n      else @config.webSocket.connectionVerified @\n\n  sendStartingMessageSequence: (message_sequence) =>\n    @_lastMessageSequence = message_sequence\n    @socket.onmessage     = @_message\n    @_sendMessage({message_sequence})\n    @_needToNotifyOfDisconnect = true\n    Transport::_open.call @\n\n  stop: =>\n    @_cleanUp()\n\n  _message: (event) =>\n    frame = @config.parse event.data\n    @_restartKeepAlive()\n    unless isPong frame\n      try\n        @_lastMessageSequence = frame.last_sequence\n        @config.message @config.parse frame.message\n      catch e\n\n  _close: (event) =>\n    if event?.wasClean then @_cleanUp()\n    else @_error event\n\n  _error: (event) =>\n    @_cleanUp()\n    if @_needToNotifyOfDisconnect\n      @_needToNotifyOfDisconnect = false\n      @config.disconnected()\n    if @_succeeded\n      @connect @_retryDelay\n    else if @config.failed\n      @config.failed @\n\n  _cleanUp: =>\n    @_clearKeepalive()\n    if @socket?\n      @socket.onopen    = null\n      @socket.onclose   = null\n      @socket.onerror   = null\n      @socket.onmessage = null\n      @socket.close()\n      # delete @socket\n\n  _restartKeepAlive: =>\n    doPing = =>\n      sendPing @socket\n      setNextKeepAlive()\n    setNextKeepAlive = =>\n      @keepaliveTimeout = setTimeout doPing, KEEPALIVE_PING_TIMEOUT\n    @_clearKeepalive()\n    setNextKeepAlive()\n\n  _clearKeepalive: =>\n    if @keepaliveTimeout?\n      clearTimeout @keepaliveTimeout\n      @keepaliveTimeout = null\n\nmodule.exports = WebSocketTransport\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/firehose/web_socket_transport.coffee\n **/","$ = require \"jquery\"\nWebSocketTransport = require \"./web_socket_transport\"\nLongPollTransport = require \"./long_poll_transport\"\n\nclass Consumer\n  constructor: (@config = {}) ->\n    # Empty handler for messages.\n    @config.message      ||= ->\n    # Empty handler for error handling.\n    @config.error        ||= ->\n    # Empty handler for when we establish a connection.\n    @config.connected    ||= ->\n    # Empty handler for when we're disconnected.\n    @config.disconnected ||= ->\n    # The initial connection failed. This is probably triggered when a\n    # transport, like WebSockets is supported by the browser, but for whatever\n    # reason it can't connect (probably a firewall)\n    @config.failed       ||= ->\n      throw \"Could not connect\"\n    # Params that we'll tack on to the URL.\n    @config.params       ||= {}\n    # Do stuff before we send the message into config.message. The sensible\n    # default on the webs is to parse JSON.\n    @config.parse        ||= JSON.parse\n\n    @_isConnected = false\n    origConnected = @config.connected\n    @config.connected = =>\n      @_isConnected = true\n      origConnected()\n\n    # Make sure we return ourself out of the constructor so we can chain.\n    this\n\n  connected: =>\n    @_isConnected\n\n  websocketTransport: (config) =>\n    new WebSocketTransport(config)\n\n  longpollTransport: (config) =>\n    new LongPollTransport(config)\n\n  connect: (delay=0) =>\n    promise = @_connectPromise()\n\n    @config.connectionVerified = @_upgradeTransport\n    if WebSocketTransport.supported()\n      @upgradeTimeout = setTimeout =>\n        ws = @websocketTransport(@config)\n        ws.connect delay\n      , 500\n    @transport = @longpollTransport(@config)\n    @transport.connect delay\n\n    promise\n\n  stop: =>\n    if @upgradeTimeout?\n      clearTimeout @upgradeTimeout\n      @upgradeTimeout = null\n    @transport.stop()\n    return\n\n  _upgradeTransport: (ws) =>\n    @transport.stop()\n    ws.sendStartingMessageSequence @transport.getLastMessageSequence()\n    @transport = ws\n    return\n\n  # Return a promise that will succeed/fail depending on whether or not the\n  # initial connection succeeds.\n  _connectPromise: =>\n    deferred = $.Deferred()\n\n    origConnected = @config.connected\n    @config.connected = =>\n      deferred.resolve()\n      if origConnected\n        @config.connected = origConnected\n        origConnected()\n\n  #  origDisconnected = @config.disconnected\n  #  @config.disconnected = =>\n  #    deferred.reject()\n  #    if origDisconnected\n  #      @config.disconnected = origDisconnected\n  #      origDisconnected()\n\n    deferred.promise()\n\nConsumer.multiplexChannel = \"channels@firehose\"\n\nmodule.exports = Consumer\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/firehose/consumer.coffee\n **/","$ = require \"jquery\"\nLongPollTransport = require \"./long_poll_transport\"\n\nclass MultiplexedLongPoll extends LongPollTransport\n  constructor: (args) ->\n    super args\n    @_lastMessageSequence = {}\n\n  subscribe: (channel, opts) =>\n    # nothing to be done\n\n  unsubscribe: (channelNames...) =>\n    # same here\n\n  _request: =>\n    return if @_stopRequestLoop\n    data = @_subscriptions()\n\n    @_lastRequest = $.ajax\n      url:          @config.uri\n      firehose:     true\n      crossDomain:  true\n      method:       \"POST\"\n      data:         data\n      dataType:     \"json\"\n      timeout:      @_timeout\n      success:      @_success\n      error:        @_error\n      cache:        false\n\n  _updateLastMessageSequences: =>\n    for channel, opts of @config.channels\n      if seq = @_lastMessageSequence[channel]\n        opts.last_sequence = seq\n      else\n        unless opts.last_sequence\n          opts.last_sequence = 0\n\n  _subscriptions: =>\n    @_updateLastMessageSequences()\n    subs = {}\n    for channel, opts of @config.channels\n      subs[channel] = opts.last_sequence || 0\n    JSON.stringify(subs)\n\n  _success: (data, status, jqXhr) =>\n    if @_needToNotifyOfReconnect or not @_succeeded\n      @_needToNotifyOfReconnect = false\n      @_open data\n    return if @_stopRequestLoop\n    if jqXhr.status is 200\n      # Of course, IE's XDomainRequest doesn't support non-200 success codes.\n      try\n        message = JSON.parse jqXhr.responseText\n        @_lastMessageSequence ||= {}\n        @_lastMessageSequence[message.channel] = message.last_sequence\n        @config.message message\n      catch e\n    @connect @_okInterval\n\nmodule.exports = MultiplexedLongPoll\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/firehose/multiplexed_long_poll.coffee\n **/","WebSocketTransport = require \"./web_socket_transport\"\n\nisPong = (o) ->\n  o.pong is 'PONG'\n\nclass MultiplexedWebSocket extends WebSocketTransport\n  constructor: (args) ->\n    super args\n\n  subscribe: (channel, opts) =>\n    @_sendMessage\n      multiplex_subscribe:\n        channel: channel\n        message_sequence: opts.last_sequence\n\n  unsubscribe: (channelNames...) =>\n    @_sendMessage\n      multiplex_unsubscribe: channelNames\n\n  getLastMessageSequence: =>\n    @_lastMessageSequence or {}\n\n  _open: =>\n    super()\n    for channel, opts of @config.channels\n      if @_lastMessageSequence\n        opts.last_sequence = @_lastMessageSequence[channel]\n\n      unless opts.last_sequence\n        opts.last_sequence = 0\n\n      @subscribe channel, opts\n\n  _message: (event) =>\n    frame = @config.parse event.data\n    @_restartKeepAlive()\n    unless isPong frame\n      try\n        @_lastMessageSequence ||= {}\n        @_lastMessageSequence[frame.channel] = frame.last_sequence\n        @config.message frame\n      catch e\n\nmodule.exports = MultiplexedWebSocket\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/firehose/multiplexed_web_socket.coffee\n **/","module.exports =\n  version: __VERSION__\n  codeName: __CODENAME__\n  Consumer: require \"./consumer\"\n  LongPollTransport: require \"./long_poll_transport\"\n  MultiplexedConsumer: require \"./multiplexed_consumer\"\n  MultiplexedLongPoll: require \"./multiplexed_long_poll\"\n  Transport: require \"./transport\"\n  WebSocketTransport: require \"./web_socket_transport\"\n  MultiplexedWebSocket: require \"./multiplexed_web_socket\"\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/firehose/index.coffee\n **/","Consumer = require \"./consumer\"\nMultiplexedWebSocket = require \"./multiplexed_web_socket\"\nMultiplexedLongPoll = require \"./multiplexed_long_poll\"\n\nclass MultiplexedConsumer extends Consumer\n  @subscriptionQuery: (config) ->\n    {\n      subscribe: [\n        \"#{channel}!#{opts.last_sequence || 0}\" for channel, opts of config.channels\n      ].join(\",\")\n    }\n\n  @normalizeChannels: (config) ->\n    for chan, opts of config.channels\n      if chan[0] != \"/\"\n        delete config.channels[chan]\n        config.channels[\"/\" + chan] = opts\n\n  @normalizeChannel: (channel) ->\n    if channel[0] != \"/\"\n      return \"/\" + channel\n    else\n      return channel\n\n  constructor: (@config = {}) ->\n    @messageHandlers = {}\n    @config.message ||= @message\n    @config.channels ||= {}\n    @config.uri += Consumer.multiplexChannel\n\n    @_updateSubscriptions()\n\n    for channel, opts of @config.channels\n      @_addSubscriptionHandler(channel, opts)\n\n    super(@config)\n\n  websocketTransport: (config) =>\n    new MultiplexedWebSocket(config)\n\n  longpollTransport: (config) =>\n    new MultiplexedLongPoll(config)\n\n  message: (msg) =>\n    if handler = @messageHandlers[msg.channel]\n      handler(@config.parse msg.message)\n\n  _addSubscriptionHandler: (channel, opts) =>\n    if opts.message\n      @messageHandlers[channel] = opts.message\n\n  _removeSubscriptionHandler: (channelNames...) =>\n    for chan in channelNames\n      delete @messageHandlers[chan]\n\n  _updateSubscriptions: =>\n    MultiplexedConsumer.normalizeChannels(@config)\n\n  subscribe: (channel, opts = {}) =>\n    channel = MultiplexedConsumer.normalizeChannel(channel)\n    @config.channels[channel] = opts\n\n    @_updateSubscriptions()\n    @_addSubscriptionHandler(channel, opts)\n    @transport.subscribe(channel, opts)\n\n  unsubscribe: (channelNames...) =>\n    return unless @connected()\n\n    for channel in channelNames\n      channel = MultiplexedConsumer.normalizeChannel(channel)\n      delete @config.channels[channel]\n\n    @_updateSubscriptions()\n    @_removeSubscriptionHandler(channelNames...)\n    @transport.unsubscribe(channelNames...)\n\nmodule.exports = MultiplexedConsumer\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/firehose/multiplexed_consumer.coffee\n **/"],"sourceRoot":""}